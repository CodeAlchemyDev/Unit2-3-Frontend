{"ast":null,"code":"var _jsxFileName = \"/Users/amber/Lambda/03_Web Applications II/04_unit-3-build/Unit2-3-Frontend/schoolinthecloud/src/components/forms/SignInForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport { apiAuth } from \"../../utils/apiAuth\"; // import Button from \"../buttons/Buttons\";\n\nexport default function SignInForm(props) {\n  // set up yup validation\n  const formSchema = yup.object().shape({\n    userName: yup.string().required(\"Please enter your username\").min(4, \"Username should be longer than 4 characters\"),\n    password: yup.string().required(\"Please enter your password\").min(3, \"Password should be longer than 3 characters\")\n  }); // Form state and error state respectively\n\n  const [formState, setFormState] = useState({\n    userName: \"\",\n    password: \"\"\n  });\n  const [errorState, setErrorState] = useState({\n    userName: \"\",\n    password: \"\"\n  }); // validation on input change\n\n  const validate = e => {\n    yup.reach(formSchema, e.target.name).validate(e.target.value).then(valid => {\n      setErrorState({ ...errorState,\n        [e.target.name]: \"\"\n      });\n    }).catch(err => {\n      setErrorState({ ...errorState,\n        [e.target.name]: err.errors[0]\n      });\n    });\n  };\n\n  const formSubmit = e => {\n    // console.log(\"submit\");\n    // console.log(formState);\n    e.preventDefault();\n    apiAuth().post(\"/login\", {\n      formState\n    }).then(response => {\n      console.log(response);\n      localStorage.setItem(\"token\", response.data); // props.history.push(\"/\");\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const inputChange = e => {\n    e.persist();\n    console.log(e.target.value);\n    validate(e);\n    setFormState({ ...formState,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  console.log(props);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formSubmit,\n    className: \"signInForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"signInTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"userName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Username:\", /*#__PURE__*/React.createElement(\"input\", {\n    className: \"signInInput\",\n    type: \"text\",\n    name: \"userName\",\n    id: \"userName\",\n    value: formState.userName,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  })), errorState.userName.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, errorState.userName) : null, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"Password:\", /*#__PURE__*/React.createElement(\"input\", {\n    className: \"signInInput\",\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    value: formState.password,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  })), errorState.password.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, errorState.password) : null, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, \"Login\")));\n}","map":{"version":3,"sources":["/Users/amber/Lambda/03_Web Applications II/04_unit-3-build/Unit2-3-Frontend/schoolinthecloud/src/components/forms/SignInForm.js"],"names":["React","useState","useEffect","yup","apiAuth","SignInForm","props","formSchema","object","shape","userName","string","required","min","password","formState","setFormState","errorState","setErrorState","validate","e","reach","target","name","value","then","valid","catch","err","errors","formSubmit","preventDefault","post","response","console","log","localStorage","setItem","data","inputChange","persist","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport { apiAuth } from \"../../utils/apiAuth\";\n// import Button from \"../buttons/Buttons\";\n\nexport default function SignInForm(props) {\n  // set up yup validation\n  const formSchema = yup.object().shape({\n    userName: yup\n      .string()\n      .required(\"Please enter your username\")\n      .min(4, \"Username should be longer than 4 characters\"),\n    password: yup\n      .string()\n      .required(\"Please enter your password\")\n      .min(3, \"Password should be longer than 3 characters\"),\n  });\n\n  // Form state and error state respectively\n  const [formState, setFormState] = useState({\n    userName: \"\",\n    password: \"\",\n  });\n\n  const [errorState, setErrorState] = useState({\n    userName: \"\",\n    password: \"\",\n  });\n\n  // validation on input change\n  const validate = (e) => {\n    yup\n      .reach(formSchema, e.target.name)\n      .validate(e.target.value)\n      .then((valid) => {\n        setErrorState({\n          ...errorState,\n          [e.target.name]: \"\",\n        });\n      })\n      .catch((err) => {\n        setErrorState({\n          ...errorState,\n          [e.target.name]: err.errors[0],\n        });\n      });\n  };\n\n  const formSubmit = (e) => {\n    // console.log(\"submit\");\n    // console.log(formState);\n    e.preventDefault();\n    apiAuth()\n      .post(\"/login\", { formState })\n      .then((response) => {\n        console.log(response);\n        localStorage.setItem(\"token\", response.data);\n        // props.history.push(\"/\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const inputChange = (e) => {\n    e.persist();\n    console.log(e.target.value);\n    validate(e);\n    setFormState({ ...formState, [e.target.name]: e.target.value });\n  };\n  console.log(props);\n\n  return (\n    <>\n      <form onSubmit={formSubmit} className=\"signInForm\">\n        <h2 className=\"signInTitle\">Sign In</h2>\n\n        <label htmlFor=\"userName\">\n          Username:\n          <input\n            className=\"signInInput\"\n            type=\"text\"\n            name=\"userName\"\n            id=\"userName\"\n            value={formState.userName}\n            onChange={inputChange}\n          />\n        </label>\n\n        {errorState.userName.length > 0 ? (\n          <p className=\"error\">{errorState.userName}</p>\n        ) : null}\n\n        <label htmlFor=\"password\">\n          Password:\n          <input\n            className=\"signInInput\"\n            type=\"password\"\n            name=\"password\"\n            id=\"password\"\n            value={formState.password}\n            onChange={inputChange}\n          />\n        </label>\n\n        {errorState.password.length > 0 ? (\n          <p className=\"error\">{errorState.password}</p>\n        ) : null}\n\n        <button type=\"submit\">Login</button>\n      </form>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}